<%= render 'shared/search' %>
<div class="room_container">
  <div class="room-details-header">
    <%= link_to "←戻る", :back %>
    <% if user_signed_in? %>
      <% if @room.user_id == current_user.id %>
        <%= link_to "編集", edit_room_path, class: "room-edit" %>
      <% end %>
    <% end %>
  </div>
  <div class="room-contents">
    <div class="room-image">
      <p>
        <% if @room.image.attached? %>
          <%= image_tag @room.image, size: "400x250"%>
        <% else %>
          <%= image_tag 'default.png', size: "400x250" %>
        <% end %>
      </p>
    </div>
    
    <div class="room-details">
      <div class="room_details-contents">
        <ul>
          <li class="room-name"><%= @room.room_name %></li>
          <li class="room-address"><%= @room.address %></li>
          <li class="star">★️ ★ ★ ★ ★</li>
          <li class="room-comments"><%= @room.room_details %></li>
        </ul>
        <p class="room-fee">¥ <%= @room.fee %> ~</p>
      </div>
      <% if user_signed_in? %>
        <div class="new-reservation-container">
          <%= form_for @reservation, url: confirm_reservations_path(@reservation) do |f| %>
          <%= f.hidden_field :room_id, value: @room.id %>
          <%= f.hidden_field :user_id, value: current_user.id %>
            <div class="reservation-textforms">
              <div class="forms date" id="datetimepicker6">
                <%= f.label :checkin_date, "チェックイン"%><br />
                <%= f.date_field :checkin_date, min: Time.zone.now, class: "reservation-form datepicker", value: "%Y/%M/%d" %>
              </div>
              <div class="forms date"  id="datetimepicker7">
                <%= f.label :checkout_date, "チェックアウト"%><br />
                <%= f.date_field :checkout_date, class: "reservation-form datepicker" %>
              </div>
              <div class="forms">
                <%= f.label :guests, "人数"%><br />
                <%= f.text_field :guests, class: "reservation-form" %>
              </div>
            </div>
            <%= f.submit "予約する", class: "button orange reservation-button" %>
          <% end %>
        </div>
      <% else %>
        <div class="new-reservation-container">
          <%= form_for @reservation, url: new_user_session_path do |f| %>
            <div class="reservation-textforms">
              <div class="forms date" id="datetimepicker6">
                <%= f.label :checkin_date, "チェックイン"%><br />
                <%= f.date_field :checkin_date, class: "reservation-form datepicker" %>
              </div>
              <div class="forms date"  id="datetimepicker7">
                <%= f.label :checkout_date, "チェックアウト"%><br />
                <%= f.date_field :checkout_date, class: "reservation-form datepicker" %>
              </div>
              <div class="forms">
                <%= f.label :guests, "人数"%><br />
                <%= f.text_field :guests, class: "reservation-form" %>
              </div>
            </div>
            <%= f.submit "ログイン", class: "button orange reservation-button" %>
          <% end %>
        </div>
      <% end %>
      
      
    </div>
  </div>
</div>

<%= javascript_pack_tag 'datetime' %>
<%= render 'shared/footer' %>
